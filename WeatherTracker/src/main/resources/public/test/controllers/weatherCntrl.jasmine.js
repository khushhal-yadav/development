describe('weatherController', function() {
    var scope, controller, httpBackend;
    
    beforeEach(module('weatherApp'));
    
    beforeEach(inject(function($rootScope, $controller, $httpBackend) {
        scope = $rootScope;
        controller = $controller;
        httpBackend = $httpBackend;
    }));

    it('should query the webservice', function() {

	    url = "dummy_url";
        httpBackend.expectGET(url).respond('{"city":{"id":2648579,"name":"Glasgow","coord":{"lon":-4.25763,"lat":55.86515},"country":"GB","population":0,"sys":{"population":0}},"cod":"200","message":0.0053,"cnt":40,"list":[{"dt":1484611200,"main":{"temp":281.79,"temp_min":280.916,"temp_max":281.79,"pressure":1023.17,"sea_level":1041.92,"grnd_level":1023.17,"humidity":99,"temp_kf":0.87},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":3.21,"deg":217.501},"rain":{"3h":0.435},"sys":{"pod":"n"},"dt_txt":"2017-01-17 00:00:00"},{"dt":1484622000,"main":{"temp":281.92,"temp_min":281.337,"temp_max":281.92,"pressure":1023.51,"sea_level":1042.26,"grnd_level":1023.51,"humidity":97,"temp_kf":0.58},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":3.27,"deg":221.5},"rain":{"3h":0.535},"sys":{"pod":"n"},"dt_txt":"2017-01-17 03:00:00"},{"dt":1484632800,"main":{"temp":282.11,"temp_min":281.82,"temp_max":282.11,"pressure":1024,"sea_level":1042.72,"grnd_level":1024,"humidity":97,"temp_kf":0.29},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":3.26,"deg":234.001},"rain":{"3h":0.39},"sys":{"pod":"n"},"dt_txt":"2017-01-17 06:00:00"},{"dt":1484643600,"main":{"temp":281.948,"temp_min":281.948,"temp_max":281.948,"pressure":1025.01,"sea_level":1043.79,"grnd_level":1025.01,"humidity":98,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":88},"wind":{"speed":3.26,"deg":238.005},"rain":{"3h":0.225},"sys":{"pod":"d"},"dt_txt":"2017-01-17 09:00:00"},{"dt":1484654400,"main":{"temp":283.108,"temp_min":283.108,"temp_max":283.108,"pressure":1025.74,"sea_level":1044.46,"grnd_level":1025.74,"humidity":100,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":88},"wind":{"speed":3.42,"deg":238.505},"rain":{"3h":0.165},"sys":{"pod":"d"},"dt_txt":"2017-01-17 12:00:00"},{"dt":1484665200,"main":{"temp":283.066,"temp_min":283.066,"temp_max":283.066,"pressure":1025.66,"sea_level":1044.35,"grnd_level":1025.66,"humidity":100,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":3.56,"deg":227.002},"rain":{"3h":0.25},"sys":{"pod":"d"},"dt_txt":"2017-01-17 15:00:00"},{"dt":1484676000,"main":{"temp":282.158,"temp_min":282.158,"temp_max":282.158,"pressure":1025.69,"sea_level":1044.49,"grnd_level":1025.69,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":4.82,"deg":217.001},"rain":{"3h":0.14},"sys":{"pod":"n"},"dt_txt":"2017-01-17 18:00:00"},{"dt":1484686800,"main":{"temp":281.198,"temp_min":281.198,"temp_max":281.198,"pressure":1026.12,"sea_level":1044.94,"grnd_level":1026.12,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":76},"wind":{"speed":5.71,"deg":225.502},"rain":{"3h":0.055},"sys":{"pod":"n"},"dt_txt":"2017-01-17 21:00:00"},{"dt":1484697600,"main":{"temp":280.491,"temp_min":280.491,"temp_max":280.491,"pressure":1026.35,"sea_level":1045.14,"grnd_level":1026.35,"humidity":96,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":6.56,"deg":230.501},"rain":{"3h":0.02},"sys":{"pod":"n"},"dt_txt":"2017-01-18 00:00:00"},{"dt":1484708400,"main":{"temp":280.102,"temp_min":280.102,"temp_max":280.102,"pressure":1026.42,"sea_level":1045.3,"grnd_level":1026.42,"humidity":97,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":6.47,"deg":236.51},"rain":{"3h":0.06},"sys":{"pod":"n"},"dt_txt":"2017-01-18 03:00:00"},{"dt":1484719200,"main":{"temp":280.054,"temp_min":280.054,"temp_max":280.054,"pressure":1026.57,"sea_level":1045.49,"grnd_level":1026.57,"humidity":97,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":5.85,"deg":231.501},"rain":{"3h":0.18},"sys":{"pod":"n"},"dt_txt":"2017-01-18 06:00:00"},{"dt":1484730000,"main":{"temp":280.464,"temp_min":280.464,"temp_max":280.464,"pressure":1027.85,"sea_level":1046.68,"grnd_level":1027.85,"humidity":98,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":5.67,"deg":228.504},"rain":{"3h":0.35},"sys":{"pod":"d"},"dt_txt":"2017-01-18 09:00:00"},{"dt":1484740800,"main":{"temp":281.329,"temp_min":281.329,"temp_max":281.329,"pressure":1028.64,"sea_level":1047.44,"grnd_level":1028.64,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":5.76,"deg":233.503},"rain":{"3h":0.47},"sys":{"pod":"d"},"dt_txt":"2017-01-18 12:00:00"},{"dt":1484751600,"main":{"temp":281.557,"temp_min":281.557,"temp_max":281.557,"pressure":1028.82,"sea_level":1047.68,"grnd_level":1028.82,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":5.16,"deg":240},"rain":{"3h":0.44},"sys":{"pod":"d"},"dt_txt":"2017-01-18 15:00:00"},{"dt":1484762400,"main":{"temp":281.309,"temp_min":281.309,"temp_max":281.309,"pressure":1029.52,"sea_level":1048.36,"grnd_level":1029.52,"humidity":98,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":4.33,"deg":234.501},"rain":{"3h":0.62},"sys":{"pod":"n"},"dt_txt":"2017-01-18 18:00:00"},{"dt":1484773200,"main":{"temp":281.04,"temp_min":281.04,"temp_max":281.04,"pressure":1030.04,"sea_level":1048.96,"grnd_level":1030.04,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":4.32,"deg":235.502},"rain":{"3h":0.31},"sys":{"pod":"n"},"dt_txt":"2017-01-18 21:00:00"},{"dt":1484784000,"main":{"temp":280.365,"temp_min":280.365,"temp_max":280.365,"pressure":1030.08,"sea_level":1048.94,"grnd_level":1030.08,"humidity":100,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":4.42,"deg":232.501},"rain":{"3h":0.18},"sys":{"pod":"n"},"dt_txt":"2017-01-19 00:00:00"},{"dt":1484794800,"main":{"temp":279.79,"temp_min":279.79,"temp_max":279.79,"pressure":1029.76,"sea_level":1048.67,"grnd_level":1029.76,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":4.76,"deg":238.004},"rain":{"3h":0.11},"sys":{"pod":"n"},"dt_txt":"2017-01-19 03:00:00"},{"dt":1484805600,"main":{"temp":279.38,"temp_min":279.38,"temp_max":279.38,"pressure":1029.49,"sea_level":1048.43,"grnd_level":1029.49,"humidity":98,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":4.62,"deg":237.505},"rain":{"3h":0.06},"sys":{"pod":"n"},"dt_txt":"2017-01-19 06:00:00"},{"dt":1484816400,"main":{"temp":279.483,"temp_min":279.483,"temp_max":279.483,"pressure":1030.2,"sea_level":1049.2,"grnd_level":1030.2,"humidity":96,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":88},"wind":{"speed":4.55,"deg":239.501},"rain":{"3h":0.09},"sys":{"pod":"d"},"dt_txt":"2017-01-19 09:00:00"},{"dt":1484827200,"main":{"temp":280.26,"temp_min":280.26,"temp_max":280.26,"pressure":1030.38,"sea_level":1049.26,"grnd_level":1030.38,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":88},"wind":{"speed":4.46,"deg":239.002},"rain":{"3h":0.1},"sys":{"pod":"d"},"dt_txt":"2017-01-19 12:00:00"},{"dt":1484838000,"main":{"temp":280.213,"temp_min":280.213,"temp_max":280.213,"pressure":1029.42,"sea_level":1048.28,"grnd_level":1029.42,"humidity":98,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":80},"wind":{"speed":4.22,"deg":234},"rain":{"3h":0.06},"sys":{"pod":"d"},"dt_txt":"2017-01-19 15:00:00"},{"dt":1484848800,"main":{"temp":279.293,"temp_min":279.293,"temp_max":279.293,"pressure":1029.32,"sea_level":1048.21,"grnd_level":1029.32,"humidity":97,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":64},"wind":{"speed":3.56,"deg":230},"rain":{"3h":0.02},"sys":{"pod":"n"},"dt_txt":"2017-01-19 18:00:00"},{"dt":1484859600,"main":{"temp":278.757,"temp_min":278.757,"temp_max":278.757,"pressure":1029.37,"sea_level":1048.26,"grnd_level":1029.37,"humidity":97,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":32},"wind":{"speed":3.31,"deg":230.003},"rain":{"3h":0.01},"sys":{"pod":"n"},"dt_txt":"2017-01-19 21:00:00"},{"dt":1484870400,"main":{"temp":277.151,"temp_min":277.151,"temp_max":277.151,"pressure":1029.1,"sea_level":1048.11,"grnd_level":1029.1,"humidity":93,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":2.93,"deg":218},"rain":{},"sys":{"pod":"n"},"dt_txt":"2017-01-20 00:00:00"},{"dt":1484881200,"main":{"temp":276.173,"temp_min":276.173,"temp_max":276.173,"pressure":1028.45,"sea_level":1047.38,"grnd_level":1028.45,"humidity":93,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":2.92,"deg":212.501},"rain":{},"sys":{"pod":"n"},"dt_txt":"2017-01-20 03:00:00"},{"dt":1484892000,"main":{"temp":275.435,"temp_min":275.435,"temp_max":275.435,"pressure":1027.73,"sea_level":1046.68,"grnd_level":1027.73,"humidity":91,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":2.72,"deg":210.5},"rain":{},"sys":{"pod":"n"},"dt_txt":"2017-01-20 06:00:00"},{"dt":1484902800,"main":{"temp":274.995,"temp_min":274.995,"temp_max":274.995,"pressure":1027.78,"sea_level":1046.82,"grnd_level":1027.78,"humidity":92,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.52,"deg":206},"rain":{},"sys":{"pod":"d"},"dt_txt":"2017-01-20 09:00:00"},{"dt":1484913600,"main":{"temp":278.389,"temp_min":278.389,"temp_max":278.389,"pressure":1027.67,"sea_level":1046.61,"grnd_level":1027.67,"humidity":100,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.55,"deg":221.002},"rain":{},"sys":{"pod":"d"},"dt_txt":"2017-01-20 12:00:00"},{"dt":1484924400,"main":{"temp":279.423,"temp_min":279.423,"temp_max":279.423,"pressure":1026.44,"sea_level":1045.33,"grnd_level":1026.44,"humidity":98,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":48},"wind":{"speed":2.62,"deg":224.506},"rain":{},"sys":{"pod":"d"},"dt_txt":"2017-01-20 15:00:00"},{"dt":1484935200,"main":{"temp":277.934,"temp_min":277.934,"temp_max":277.934,"pressure":1025.9,"sea_level":1044.88,"grnd_level":1025.9,"humidity":93,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":76},"wind":{"speed":1.96,"deg":200.504},"rain":{"3h":0.04},"sys":{"pod":"n"},"dt_txt":"2017-01-20 18:00:00"},{"dt":1484946000,"main":{"temp":277.786,"temp_min":277.786,"temp_max":277.786,"pressure":1025.46,"sea_level":1044.45,"grnd_level":1025.46,"humidity":96,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":2.47,"deg":191.5},"rain":{"3h":0.09},"sys":{"pod":"n"},"dt_txt":"2017-01-20 21:00:00"},{"dt":1484956800,"main":{"temp":277.807,"temp_min":277.807,"temp_max":277.807,"pressure":1024.59,"sea_level":1043.6,"grnd_level":1024.59,"humidity":96,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":80},"wind":{"speed":3.21,"deg":193.505},"rain":{"3h":0.11},"sys":{"pod":"n"},"dt_txt":"2017-01-21 00:00:00"},{"dt":1484967600,"main":{"temp":277.739,"temp_min":277.739,"temp_max":277.739,"pressure":1023.26,"sea_level":1042.21,"grnd_level":1023.26,"humidity":96,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":88},"wind":{"speed":4.43,"deg":198.001},"rain":{"3h":0.17},"sys":{"pod":"n"},"dt_txt":"2017-01-21 03:00:00"},{"dt":1484978400,"main":{"temp":277.87,"temp_min":277.87,"temp_max":277.87,"pressure":1022.05,"sea_level":1041.04,"grnd_level":1022.05,"humidity":95,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":92},"wind":{"speed":4.47,"deg":209.505},"rain":{"3h":0.15},"sys":{"pod":"n"},"dt_txt":"2017-01-21 06:00:00"},{"dt":1484989200,"main":{"temp":278.097,"temp_min":278.097,"temp_max":278.097,"pressure":1021.7,"sea_level":1040.7,"grnd_level":1021.7,"humidity":96,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":4.51,"deg":212.501},"rain":{"3h":0.2},"sys":{"pod":"d"},"dt_txt":"2017-01-21 09:00:00"},{"dt":1485000000,"main":{"temp":278.383,"temp_min":278.383,"temp_max":278.383,"pressure":1021.1,"sea_level":1040.07,"grnd_level":1021.1,"humidity":99,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":88},"wind":{"speed":5.46,"deg":203.5},"rain":{"3h":0.2575},"sys":{"pod":"d"},"dt_txt":"2017-01-21 12:00:00"},{"dt":1485010800,"main":{"temp":277.681,"temp_min":277.681,"temp_max":277.681,"pressure":1019.44,"sea_level":1038.47,"grnd_level":1019.44,"humidity":94,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":80},"wind":{"speed":5.62,"deg":202.005},"rain":{"3h":0.0375},"sys":{"pod":"d"},"dt_txt":"2017-01-21 15:00:00"},{"dt":1485021600,"main":{"temp":276.689,"temp_min":276.689,"temp_max":276.689,"pressure":1018.39,"sea_level":1037.42,"grnd_level":1018.39,"humidity":91,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":64},"wind":{"speed":5.39,"deg":205.504},"rain":{"3h":0.0125},"sys":{"pod":"n"},"dt_txt":"2017-01-21 18:00:00"},{"dt":1485032400,"main":{"temp":276.105,"temp_min":276.105,"temp_max":276.105,"pressure":1017.65,"sea_level":1036.56,"grnd_level":1017.65,"humidity":92,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":68},"wind":{"speed":5.53,"deg":213.501},"rain":{},"sys":{"pod":"n"},"dt_txt":"2017-01-21 21:00:00"}]}');
        controller('weatherController', {'$scope': scope });
        httpBackend.flush();
        scope.$apply();
        expect(weatherData.list[0].date).toEqual('2017-01-17');

    });

});